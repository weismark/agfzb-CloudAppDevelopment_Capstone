<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dealership Review</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet">
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
    <script>
        $(document).ready(function () {
            // Make AJAX request to your API endpoint
            $.ajax({
                url: 'https://markoweissma-3000.theiadockernext-1-labs-prod-theiak8s-4-tor01.proxy.cognitiveclass.ai/dealerships/get',
                method: 'GET',
                dataType: 'json',
                success: function (data) {
                    console.log('Received data:', data);
                    if (Array.isArray(data) && data.length > 0) {
                        // Populate the table with the received data using Bootstrap Table
                        $('#table').bootstrapTable({
                            data: data,
                        });
                    } else {
                        console.error('No data received or data is not in the expected format.');
                    }
                },
                error: function (error) {
                    console.error('Error fetching data:', error);
                }
            });
        });
    </script>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="{% url 'djangoapp:index' %}">Dealership Review</a>
            </div>
            <ul class="nav navbar-nav navbar-right list-group-horizontal">
                <li>
                    <a class="btn btn-link" href="{% url 'djangoapp:about' %}">About Us</a>
                    <a class="btn btn-link" href="{% url 'djangoapp:contact' %}">Contact Us</a>
                </li>
                {% if user.is_authenticated %}
                <li>
                    <span>Welcome, {{ user.first_name|default:user.username }}!</span>
                    <a class="btn btn-link" href="{% url 'djangoapp:signout' %}">Sign Out</a>
                </li>
                {% else %}
                <li>
                    <form class="form-inline" action="{% url 'djangoapp:login' %}" method="post">
                        {% csrf_token %}
                        <input class="form-control mr-sm-2" type="text" placeholder="Username" name="username">
                        <input class="form-control mr-sm-2" type="password" placeholder="Password" name="password">
                        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Login</button>
                    </form>
                </li>
                <li>
                    <a class="btn btn-link" href="{% url 'djangoapp:signup' %}">Sign Up</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <!-- Content block that child templates can override -->
    {% block content %}
    
    {% endblock %}
</body>
</html>
